(()=>{var e={};e.id=674,e.ids=[674],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},95350:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),a(45676),a(38074),a(35866);var s=a(23191),r=a(88716),i=a(37922),l=a.n(i),n=a(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let c=["",{children:["social",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,45676)),"/Users/nithin/LimitBreakers/src/app/social/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,38074)),"/Users/nithin/LimitBreakers/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/nithin/LimitBreakers/src/app/social/page.tsx"],m="/social/page",h={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/social/page",pathname:"/social",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},83701:(e,t,a)=>{Promise.resolve().then(a.bind(a,2545))},2545:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(10326),r=a(17577),i=a(77109),l=a(16856),n=a(90434),o=a(46226),c=a(86462);let d=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))});var m=a(73088);let h=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))});var u=a(72591);let p=r.forwardRef(function({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});function x({onPostCreated:e}){let{data:t}=(0,i.useSession)(),[a,n]=(0,r.useState)(""),[x,g]=(0,r.useState)([]),[f,b]=(0,r.useState)("public"),[v,j]=(0,r.useState)(!1),[w,y]=(0,r.useState)(!1),N=async t=>{if(t.preventDefault(),a.trim()){j(!0);try{(await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:a.trim(),images:x,visibility:f,type:x.length>0?"image":"text"})})).ok&&(n(""),g([]),b("public"),y(!1),e?.())}catch(e){console.error("Error creating post:",e)}finally{j(!1)}}},k=e=>{g(x.filter((t,a)=>a!==e))},E=[{value:"public",label:"Public",icon:d,description:"Anyone can see this post"},{value:"followers",label:"Followers",icon:m.Z,description:"Only your followers can see this"},{value:"private",label:"Private",icon:h,description:"Only you can see this"}];return t?(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-md rounded-xl p-6 mb-6",children:[(0,s.jsxs)("form",{onSubmit:N,children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:t.user?.image?s.jsx(o.default,{src:t.user.image,alt:t.user.name||"",width:40,height:40,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-600 flex items-center justify-center text-white text-sm font-bold",children:t.user?.name?.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"font-medium text-white",children:t.user?.name}),s.jsx("div",{className:"text-sm text-purple-200",children:"Share your journey..."})]})]}),s.jsx("textarea",{value:a,onChange:e=>n(e.target.value),placeholder:"What's on your mind? Share your progress, achievements, or thoughts...",className:"w-full p-4 bg-white/5 border border-white/10 rounded-lg text-white placeholder-purple-300 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,maxLength:500}),(0,s.jsxs)("div",{className:"text-right text-sm text-purple-300 mt-2",children:[a.length,"/500"]}),s.jsx(c.M,{children:x.length>0&&s.jsx(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:x.map((e,t)=>(0,s.jsxs)(l.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"relative aspect-square rounded-lg overflow-hidden",children:[s.jsx(o.default,{src:e,alt:`Upload ${t+1}`,fill:!0,className:"object-cover"}),s.jsx("button",{type:"button",onClick:()=>k(t),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 transition-colors",children:s.jsx(u.Z,{className:"w-4 h-4"})})]},t))})})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>y(!w),className:"flex items-center gap-2 px-3 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-200 rounded-lg transition-colors",children:[s.jsx(p,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"Add Photo"})]}),s.jsx("select",{value:f,onChange:e=>b(e.target.value),className:"bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:E.map(e=>s.jsx("option",{value:e.value,className:"bg-gray-800",children:e.label},e.value))})]}),s.jsx("button",{type:"submit",disabled:!a.trim()||v,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-all duration-200 transform hover:scale-105 disabled:transform-none",children:v?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(l.E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Posting..."]}):"Post"})]})]}),s.jsx(c.M,{children:w&&s.jsx(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 p-4 bg-white/5 rounded-lg border-2 border-dashed border-white/20",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx(p,{className:"w-12 h-12 text-purple-300 mx-auto mb-2"}),s.jsx("p",{className:"text-purple-200 mb-4",children:"Drag and drop images here or click to select"}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",id:"image-upload",onChange:e=>{console.log("Files selected:",Array.from(e.target.files||[]))}}),s.jsx("label",{htmlFor:"image-upload",className:"inline-block px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg cursor-pointer transition-colors",children:"Select Images"})]})})})]}):null}var g=a(45003),f=a(48939),b=a(49045),v=a(89430),j=a(41964);function w(){let{data:e}=(0,i.useSession)(),[t,a]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[h,u]=(0,r.useState)(1),[p,w]=(0,r.useState)(!0),y=async(e=1)=>{try{let t=await fetch(`/api/posts?page=${e}&limit=10`);if(t.ok){let s=await t.json();1===e?a(s.posts):a(e=>[...e,...s.posts]),w(s.hasMore)}}catch(e){console.error("Error fetching posts:",e)}finally{d(!1)}},N=async s=>{if(e)try{let r=await fetch(`/api/posts/${s}/like`,{method:"POST"});if(r.ok){let i=await r.json();a(t.map(t=>t._id===s?{...t,likes:i.liked?[...t.likes,{_id:e.user.id}]:t.likes.filter(t=>t._id!==e.user.id)}:t))}}catch(e){console.error("Error liking post:",e)}},k=e=>{let t=new Date(e),a=Math.floor((new Date().getTime()-t.getTime())/6e4),s=Math.floor(a/60),r=Math.floor(s/24);return a<60?`${a}m ago`:s<24?`${s}h ago`:r<7?`${r}d ago`:t.toLocaleDateString()};return c&&0===t.length?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 flex items-center justify-center",children:s.jsx(l.E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-white border-t-transparent rounded-full"})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Social Feed"}),s.jsx("p",{className:"text-purple-200",children:"Connect with your community and share your journey"})]}),e&&s.jsx(x,{onPostCreated:()=>y(1)}),s.jsx("div",{className:"space-y-6",children:t.map((t,a)=>(0,s.jsxs)(l.E.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"bg-white/10 backdrop-blur-md rounded-xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(n.default,{href:`/profile/${t.author.username}`,children:s.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden ring-2 ring-white/20 hover:ring-white/40 transition-all cursor-pointer",children:t.author.avatar?s.jsx(o.default,{src:t.author.avatar,alt:t.author.name,width:48,height:48,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-600 flex items-center justify-center text-white font-bold",children:t.author.name.charAt(0).toUpperCase()})})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx(n.default,{href:`/profile/${t.author.username}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-2 hover:text-blue-300 transition-colors cursor-pointer",children:[s.jsx("span",{className:"font-semibold text-white",children:t.author.name}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-yellow-400",children:[s.jsx(g.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{className:"text-xs",children:["Lv.",t.author.level]})]})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-purple-300",children:[(0,s.jsxs)("span",{children:["@",t.author.username]}),s.jsx("span",{children:"â€¢"}),s.jsx("span",{children:k(t.createdAt)})]})]}),"text"!==t.type&&s.jsx("div",{className:"px-2 py-1 bg-blue-500/20 text-blue-200 rounded text-xs font-medium",children:t.type.replace("_"," ").toUpperCase()})]}),s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-white whitespace-pre-wrap leading-relaxed",children:t.content})}),t.images&&t.images.length>0&&s.jsx("div",{className:`grid gap-2 mb-4 ${1===t.images.length?"grid-cols-1":2===t.images.length?"grid-cols-2":"grid-cols-2 md:grid-cols-3"}`,children:t.images.map((e,a)=>s.jsx("div",{className:`aspect-square rounded-lg overflow-hidden ${1===t.images.length?"max-w-md mx-auto":""}`,children:s.jsx(o.default,{src:e,alt:`Post image ${a+1}`,width:300,height:300,className:"w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer"})},a))}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("button",{onClick:()=>N(t._id),className:`flex items-center gap-2 transition-colors ${t.likes.some(t=>t._id===e?.user?.id)?"text-red-400 hover:text-red-300":"text-purple-300 hover:text-red-400"}`,children:[t.likes.some(t=>t._id===e?.user?.id)?s.jsx(j.Z,{className:"w-5 h-5"}):s.jsx(f.Z,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:t.likes.length})]}),(0,s.jsxs)("button",{className:"flex items-center gap-2 text-purple-300 hover:text-blue-400 transition-colors",children:[s.jsx(b.Z,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:t.comments.length})]}),s.jsx("button",{className:"flex items-center gap-2 text-purple-300 hover:text-green-400 transition-colors",children:s.jsx(v.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"text-xs text-purple-400",children:[t.author.honorPoints.toLocaleString()," Honor Points"]})]})]},t._id))}),p&&s.jsx(l.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center mt-8",children:s.jsx("button",{onClick:()=>{if(p&&!c){let e=h+1;u(e),y(e)}},disabled:c,className:"px-6 py-3 bg-white/10 hover:bg-white/20 backdrop-blur-md text-white rounded-lg transition-colors disabled:opacity-50",children:c?"Loading...":"Load More Posts"})}),0===t.length&&!c&&s.jsx(l.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:(0,s.jsxs)("div",{className:"text-purple-300 mb-4",children:[s.jsx(m.Z,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No posts yet"}),s.jsx("p",{children:"Be the first to share your journey!"})]})})]})})}},45676:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/nithin/LimitBreakers/src/app/social/page.tsx#default`)},41964:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(17577);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))})}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[948,792,226,960],()=>a(95350));module.exports=s})();